import 'dotenv/config'\nimport express from 'express'\nimport morgan from 'morgan'\nimport cors from 'cors'\nimport { connectDB } from './lib/db.js'\nimport summariesRouter from './routes/summaries.js'\nimport { scheduleDailyJob } from './cron.js'\n\nconst app = express()\napp.use(cors())\napp.use(express.json({ limit: '1mb' }))\napp.use(morgan('dev'))\n\napp.get('/health', (req,res)=>res.json({ ok: true }))\napp.use('/api/summaries', summariesRouter)\n\nconst port = process.env.PORT || 4000\n\nconnectDB().then(()=>{\n  app.listen(port, ()=>{\n    console.log(`API running on :${port}`)\n    // Start cron only in production or when explicitly desired\n    if (process.env.NODE_ENV === 'production') {\n      scheduleDailyJob()\n    }\n  })\n})\n